{"version":3,"sources":["app.js"],"names":["page","appointment","name","date","time","services","document","addEventListener","startApp","showSection","changeSection","previousPage","nextPage","paginationButton","showSummary","saveName","saveDate","saveTime","disableLastDays","previousSection","querySelector","classList","remove","add","previousTab","querySelectorAll","forEach","link","e","preventDefault","Number","target","dataset","step","showServices","async","result","fetch","db","json","map","service","id","price","serviceName","createElement","textContent","servicePrice","serviceDiv","onclick","selectService","appendChild","error","console","log","element","tagName","parentElement","contains","deleteService","serviceObj","firstElementChild","nextElementSibling","addService","filter","summaryDiv","Object","values","includes","errors","nameA","innerHTML","dateA","timeA","serviceContent","headingService","total","nameService","priceService","totalServices","split","trim","totalPay","textName","value","length","showAlert","alert","message","type","setTimeout","dateInput","day","Date","getUTCDay","today","getUTCDate","lastday","year","getFullYear","month","getMonth","getDate","concatDate","min","timeInput","dateTime"],"mappings":"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","file":"bundle.js","sourcesContent":["let page = 1;\r\n\r\nconst appointment = {\r\n  name: \"\",\r\n  date: \"\",\r\n  time: \"\",\r\n  services: [],\r\n};\r\n\r\ndocument.addEventListener(\"DOMContentLoaded\", () => {\r\n  startApp();\r\n\r\n  //hightlight Current Div\r\n  showSection();\r\n\r\n  //hide or show section\r\n  changeSection();\r\n\r\n  previousPage();\r\n\r\n  nextPage();\r\n\r\n  //check for show or hide pagination\r\n  paginationButton();\r\n\r\n  //Show Summary\r\n  showSummary();\r\n\r\n  //save Name\r\n  saveName();\r\n\r\n  //save Date\r\n  saveDate();\r\n\r\n  //save Time\r\n  saveTime();\r\n\r\n  //disable last dates\r\n  disableLastDays();\r\n});\r\n\r\nconst showSection = () => {\r\n  //delete previous section\r\n  const previousSection = document.querySelector(\".show-section\");\r\n  if (previousSection) {\r\n    previousSection.classList.remove(\"show-section\");\r\n  }\r\n\r\n  const currentSection = document.querySelector(`#step-${page}`);\r\n  currentSection.classList.add(\"show-section\");\r\n\r\n  const previousTab = document.querySelector(\".current\");\r\n  if (previousTab) {\r\n    previousTab.classList.remove(\"current\");\r\n  }\r\n\r\n  //Highlight\r\n  const tab = document.querySelector(`[data-step=\"${page}\"]`);\r\n  tab.classList.add(\"current\");\r\n};\r\n\r\nconst changeSection = () => {\r\n  const links = document.querySelectorAll(\".tabs button\");\r\n  links.forEach((link) => {\r\n    link.addEventListener(\"click\", (e) => {\r\n      e.preventDefault();\r\n      page = Number(e.target.dataset.step);\r\n\r\n      showSection();\r\n      paginationButton();\r\n    });\r\n  });\r\n};\r\n\r\nconst startApp = () => {\r\n  showServices();\r\n};\r\nconst showServices = async () => {\r\n  try {\r\n    const result = await fetch(\"./services.json\");\r\n    const db = await result.json();\r\n\r\n    const { services } = db;\r\n\r\n    //generate html\r\n    services.map((service) => {\r\n      const { id, name, price } = service;\r\n\r\n      //DOM Scripting\r\n      const serviceName = document.createElement(\"P\");\r\n      serviceName.textContent = name;\r\n      serviceName.classList.add(\"service-name\");\r\n\r\n      const servicePrice = document.createElement(\"P\");\r\n      servicePrice.textContent = `$${price}`;\r\n      servicePrice.classList.add(\"service-price\");\r\n\r\n      const serviceDiv = document.createElement(\"DIV\");\r\n      serviceDiv.classList.add(\"service\");\r\n      serviceDiv.dataset.id = id;\r\n\r\n      //Select a Div\r\n      serviceDiv.onclick = selectService;\r\n\r\n      //inyectar precio y nombre al div\r\n      serviceDiv.appendChild(serviceName);\r\n      serviceDiv.appendChild(servicePrice);\r\n\r\n      //inyectar al html\r\n      document.querySelector(\"#services\").appendChild(serviceDiv);\r\n    });\r\n  } catch (error) {\r\n    console.log(error);\r\n  }\r\n};\r\n\r\nconst selectService = (e) => {\r\n  let element;\r\n\r\n  if (e.target.tagName === \"P\") {\r\n    element = e.target.parentElement;\r\n  } else {\r\n    element = e.target;\r\n  }\r\n\r\n  if (element.classList.contains(\"selected\")) {\r\n    element.classList.remove(\"selected\");\r\n\r\n    const id = Number(element.dataset.id);\r\n\r\n    deleteService(id);\r\n  } else {\r\n    element.classList.add(\"selected\");\r\n\r\n    const serviceObj = {\r\n      id: Number(element.dataset.id),\r\n      name: element.firstElementChild.textContent,\r\n      price: element.firstElementChild.nextElementSibling.textContent,\r\n    };\r\n\r\n    addService(serviceObj);\r\n  }\r\n};\r\n\r\nconst addService = (serviceObj) => {\r\n  const { services } = appointment;\r\n  appointment.services = [...services, serviceObj];\r\n\r\n  console.log(appointment);\r\n};\r\n\r\nconst deleteService = (id) => {\r\n  const { services } = appointment;\r\n  appointment.services = services.filter((service) => service.id !== id);\r\n\r\n  console.log(appointment);\r\n};\r\n\r\nconst previousPage = () => {\r\n  const previousPage = document.querySelector(\"#previous\");\r\n  previousPage.addEventListener(\"click\", () => {\r\n    page--;\r\n    paginationButton();\r\n  });\r\n};\r\n\r\nconst nextPage = () => {\r\n  const nextPage = document.querySelector(\"#next\");\r\n  nextPage.addEventListener(\"click\", () => {\r\n    page++;\r\n\r\n    paginationButton();\r\n  });\r\n};\r\n\r\nconst paginationButton = () => {\r\n  const previousPage = document.querySelector(\"#previous\");\r\n  const nextPage = document.querySelector(\"#next\");\r\n\r\n  if (page === 1) {\r\n    previousPage.classList.add(\"hidde\");\r\n  } else if (page === 3) {\r\n    nextPage.classList.add(\"hidde\");\r\n    previousPage.classList.remove(\"hidde\");\r\n\r\n    showSummary();\r\n  } else {\r\n    previousPage.classList.remove(\"hidde\");\r\n    nextPage.classList.remove(\"hidde\");\r\n  }\r\n\r\n  showSection();\r\n};\r\n\r\nconst showSummary = () => {\r\n  const { name, date, time, services } = appointment;\r\n\r\n  const summaryDiv = document.querySelector(\".summary-content\");\r\n\r\n  //clean previous html\r\n  while (summaryDiv.firstElementChild.nextElementSibling) {\r\n    summaryDiv.firstElementChild.nextElementSibling.remove();\r\n  }\r\n\r\n  if (Object.values(appointment).includes(\"\")) {\r\n    const errors = document.createElement(\"P\");\r\n\r\n    errors.textContent = \"All Fields Of Information Are Required\";\r\n    errors.classList.add(\"error-date\");\r\n\r\n    summaryDiv.appendChild(errors);\r\n  } else {\r\n    //Showing Summary\r\n    const nameA = document.createElement(\"P\");\r\n    nameA.innerHTML = `<span>Name: </span> ${name}`;\r\n    const dateA = document.createElement(\"P\");\r\n    dateA.innerHTML = `<span>Date:</span> ${date}`;\r\n    const timeA = document.createElement(\"P\");\r\n    timeA.innerHTML = `<span>Time:</span> ${time}`;\r\n\r\n    //iterar sobre servicios\r\n    const serviceContent = document.createElement(\"DIV\");\r\n    serviceContent.classList.add(\"service-content\");\r\n\r\n    const headingService = document.createElement(\"H3\");\r\n    headingService.textContent = \"Services Summary\";\r\n    serviceContent.appendChild(headingService);\r\n\r\n    let total = 0;\r\n    services.forEach((service) => {\r\n      const { name, price } = service;\r\n\r\n      const serviceDiv = document.createElement(\"DIV\");\r\n      serviceDiv.classList.add(\"service-div\");\r\n\r\n      const nameService = document.createElement(\"P\");\r\n      nameService.textContent = name;\r\n\r\n      const priceService = document.createElement(\"P\");\r\n      priceService.textContent = price;\r\n      priceService.classList.add(\"price\");\r\n\r\n      const totalServices = price.split(\"$\");\r\n      total += Number(totalServices[1].trim());\r\n      \r\n\r\n      serviceDiv.appendChild(nameService);\r\n      serviceDiv.appendChild(priceService);\r\n\r\n      serviceContent.appendChild(serviceDiv);\r\n    });\r\n\r\n    summaryDiv.appendChild(nameA);\r\n    summaryDiv.appendChild(dateA);\r\n    summaryDiv.appendChild(timeA);\r\n    summaryDiv.appendChild(serviceContent);\r\n\r\n    const totalPay = document.createElement(\"P\")\r\n    totalPay.classList.add(\"totals\")\r\n    totalPay.innerHTML = `<span>Total: </span> $${total}`\r\n    summaryDiv.appendChild(totalPay)\r\n  }\r\n};\r\n\r\nconst saveName = () => {\r\n  const nameInput = document.querySelector(\"#name\");\r\n\r\n  nameInput.addEventListener(\"input\", (e) => {\r\n    const textName = e.target.value.trim();\r\n\r\n    if (textName === \"\" || textName.length < 3 || textName > 50) {\r\n      showAlert(\"Invalid Name\", \"error\");\r\n    } else {\r\n      const alert = document.querySelector(\".alert\");\r\n      if (alert) {\r\n        alert.remove();\r\n      }\r\n      appointment.name = textName;\r\n      console.log(appointment);\r\n    }\r\n  });\r\n};\r\n\r\nconst showAlert = (message, type) => {\r\n  const previousAlert = document.querySelector(\".alert\");\r\n  if (previousAlert) {\r\n    return;\r\n  }\r\n\r\n  const alert = document.createElement(\"DIV\");\r\n\r\n  alert.textContent = message;\r\n  alert.classList.add(\"alert\");\r\n\r\n  if (type === \"error\") {\r\n    alert.classList.add(\"error\");\r\n  } else if (type === \"warning\") {\r\n    alert.classList.add(\"warning\");\r\n  }\r\n\r\n  //insert to html\r\n  const form = document.querySelector(\".form\");\r\n  form.appendChild(alert);\r\n\r\n  //after 3 secons delete\r\n\r\n  setTimeout(() => {\r\n    alert.remove();\r\n  }, 5000);\r\n};\r\n\r\nconst saveDate = () => {\r\n  const dateInput = document.querySelector(\"#date\");\r\n  dateInput.addEventListener(\"input\", (e) => {\r\n    const day = new Date(e.target.value).getUTCDay();\r\n    const today = new Date(e.target.value).getUTCDate();\r\n    const lastday = new Date().getUTCDate();\r\n\r\n    if ([6, 0].includes(day)) {\r\n      e.preventDefault();\r\n      dateInput.value = \"\";\r\n      showAlert(\"Sorry we work from Mondays to Fridays\", \"warning\");\r\n    } else if (today < lastday) {\r\n      e.preventDefault();\r\n      dateInput.value = \"\";\r\n      showAlert(\"This Day Might Be full\", \"warning\");\r\n    } else {\r\n      const alert = document.querySelector(\".alert\");\r\n      if (alert) {\r\n        alert.remove();\r\n      }\r\n      appointment.date = dateInput.value;\r\n\r\n      console.log(appointment);\r\n    }\r\n\r\n    // const options = {\r\n    //   year: \"numeric\",\r\n    //   month: \"long\",\r\n    //   weekday: \"string\"\r\n    // }\r\n    // console.log(day.toLocaleDateString(\"es-ES\", options));\r\n  });\r\n};\r\n\r\nconst disableLastDays = () => {\r\n  const dateInput = document.querySelector(\"#date\");\r\n\r\n  const year = new Date().getFullYear();\r\n  const month = new Date().getMonth() + 1;\r\n  const day = new Date().getDate();\r\n\r\n  const concatDate = `${year}-${month < 10 ? `0${month}` : month}-${\r\n    day < 10 ? `0${day}` : day\r\n  }`;\r\n\r\n  dateInput.min = concatDate;\r\n};\r\n\r\nconst saveTime = () => {\r\n  const timeInput = document.querySelector(\"#time\");\r\n  timeInput.addEventListener(\"input\", (e) => {\r\n    const dateTime = e.target.value;\r\n    const time = dateTime.split(\":\");\r\n\r\n    if (time[0] < 08 || time[0] > 20) {\r\n      e.preventDefault();\r\n      timeInput.value = \"\";\r\n      showAlert(\"Sorry we work from 08:00 am to 08:00 pm\", \"warning\");\r\n    } else {\r\n      const alert = document.querySelector(\".alert\");\r\n      if (alert) {\r\n        alert.remove();\r\n      }\r\n      appointment.time = dateTime;\r\n    }\r\n    console.log(appointment);\r\n  });\r\n};\r\n"]}