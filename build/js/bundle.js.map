{"version":3,"sources":["app.js"],"names":["page","appointment","name","date","time","services","document","addEventListener","startApp","showSection","changeSection","previousPage","nextPage","paginationButton","showSummary","saveName","saveDate","saveTime","disableLastDays","previousSection","querySelector","classList","remove","add","previousTab","querySelectorAll","forEach","link","e","preventDefault","Number","target","dataset","step","showServices","async","result","fetch","json","service","id","price","serviceName","createElement","textContent","servicePrice","serviceDiv","onclick","selectService","appendChild","error","console","log","element","tagName","parentElement","contains","deleteService","serviceObj","firstElementChild","nextElementSibling","addService","filter","summaryDiv","Object","values","includes","errors","nameA","innerHTML","dateA","timeA","serviceContent","headingService","total","nameService","priceService","totalServices","split","trim","totalPay","textName","value","length","showAlert","alert","message","type","setTimeout","dateInput","day","Date","getUTCDay","year","getFullYear","month","getMonth","getDate","concatDate","min","timeInput","dateTime"],"mappings":"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","file":"bundle.js","sourcesContent":["let page = 1;\r\n\r\nconst appointment = {\r\n  name: \"\",\r\n  date: \"\",\r\n  time: \"\",\r\n  services: [],\r\n};\r\n\r\ndocument.addEventListener(\"DOMContentLoaded\", () => {\r\n  startApp();\r\n\r\n  //hightlight Current Div\r\n  showSection();\r\n\r\n  //hide or show section\r\n  changeSection();\r\n\r\n  previousPage();\r\n\r\n  nextPage();\r\n\r\n  //check for show or hide pagination\r\n  paginationButton();\r\n\r\n  //Show Summary\r\n  showSummary();\r\n\r\n  //save Name\r\n  saveName();\r\n\r\n  //save Date\r\n  saveDate();\r\n\r\n  //save Time\r\n  saveTime();\r\n\r\n  //disable last dates\r\n  disableLastDays();\r\n});\r\n\r\nconst showSection = () => {\r\n  //delete previous section\r\n  const previousSection = document.querySelector(\".show-section\");\r\n  if (previousSection) {\r\n    previousSection.classList.remove(\"show-section\");\r\n  }\r\n\r\n  const currentSection = document.querySelector(`#step-${page}`);\r\n  currentSection.classList.add(\"show-section\");\r\n\r\n  const previousTab = document.querySelector(\".current\");\r\n  if (previousTab) {\r\n    previousTab.classList.remove(\"current\");\r\n  }\r\n\r\n  //Highlight\r\n  const tab = document.querySelector(`[data-step=\"${page}\"]`);\r\n  tab.classList.add(\"current\");\r\n};\r\n\r\nconst changeSection = () => {\r\n  const links = document.querySelectorAll(\".tabs button\");\r\n  links.forEach((link) => {\r\n    link.addEventListener(\"click\", (e) => {\r\n      e.preventDefault();\r\n      page = Number(e.target.dataset.step);\r\n\r\n      showSection();\r\n      paginationButton();\r\n    });\r\n  });\r\n};\r\n\r\nconst startApp = () => {\r\n  showServices();\r\n};\r\nconst showServices = async () => {\r\n  try {\r\n\r\n    const url = \"http://localhost:3000/services.php\"\r\n\r\n    const result = await fetch(\"services.json\" ); // \"services.json\")\r\n    const db = await result.json();\r\n\r\n    //generate html\r\n    db.forEach((service) => {\r\n      const { id, name, price } = service;\r\n\r\n      //DOM Scripting\r\n      const serviceName = document.createElement(\"P\");\r\n      serviceName.textContent = name;\r\n      serviceName.classList.add(\"service-name\");\r\n\r\n      const servicePrice = document.createElement(\"P\");\r\n      servicePrice.textContent = `$${price}`;\r\n      servicePrice.classList.add(\"service-price\");\r\n\r\n      const serviceDiv = document.createElement(\"DIV\");\r\n      serviceDiv.classList.add(\"service\");\r\n      serviceDiv.dataset.id = id;\r\n\r\n      //Select a Div\r\n      serviceDiv.onclick = selectService;\r\n\r\n      //inyectar precio y nombre al div\r\n      serviceDiv.appendChild(serviceName);\r\n      serviceDiv.appendChild(servicePrice);\r\n\r\n      //inyectar al html\r\n      document.querySelector(\"#services\").appendChild(serviceDiv);\r\n    });\r\n  } catch (error) {\r\n    console.log(error);\r\n  }\r\n};\r\n\r\nconst selectService = (e) => {\r\n  let element;\r\n\r\n  if (e.target.tagName === \"P\") {\r\n    element = e.target.parentElement;\r\n  } else {\r\n    element = e.target;\r\n  }\r\n\r\n  if (element.classList.contains(\"selected\")) {\r\n    element.classList.remove(\"selected\");\r\n\r\n    const id = Number(element.dataset.id);\r\n\r\n    deleteService(id);\r\n  } else {\r\n    element.classList.add(\"selected\");\r\n\r\n    const serviceObj = {\r\n      id: Number(element.dataset.id),\r\n      name: element.firstElementChild.textContent,\r\n      price: element.firstElementChild.nextElementSibling.textContent,\r\n    };\r\n\r\n    addService(serviceObj);\r\n  }\r\n};\r\n\r\nconst addService = (serviceObj) => {\r\n  const { services } = appointment;\r\n  appointment.services = [...services, serviceObj];\r\n\r\n  console.log(appointment);\r\n};\r\n\r\nconst deleteService = (id) => {\r\n  const { services } = appointment;\r\n  appointment.services = services.filter((service) => service.id !== id);\r\n\r\n  console.log(appointment);\r\n};\r\n\r\nconst previousPage = () => {\r\n  const previousPage = document.querySelector(\"#previous\");\r\n  previousPage.addEventListener(\"click\", () => {\r\n    page--;\r\n    paginationButton();\r\n  });\r\n};\r\n\r\nconst nextPage = () => {\r\n  const nextPage = document.querySelector(\"#next\");\r\n  nextPage.addEventListener(\"click\", () => {\r\n    page++;\r\n\r\n    paginationButton();\r\n  });\r\n};\r\n\r\nconst paginationButton = () => {\r\n  const previousPage = document.querySelector(\"#previous\");\r\n  const nextPage = document.querySelector(\"#next\");\r\n\r\n  if (page === 1) {\r\n    previousPage.classList.add(\"hidde\");\r\n  } else if (page === 3) {\r\n    nextPage.classList.add(\"hidde\");\r\n    previousPage.classList.remove(\"hidde\");\r\n\r\n    showSummary();\r\n  } else {\r\n    previousPage.classList.remove(\"hidde\");\r\n    nextPage.classList.remove(\"hidde\");\r\n  }\r\n\r\n  showSection();\r\n};\r\n\r\nconst showSummary = () => {\r\n  const { name, date, time, services } = appointment;\r\n\r\n  const summaryDiv = document.querySelector(\".summary-content\");\r\n\r\n  //clean previous html\r\n  while (summaryDiv.firstElementChild.nextElementSibling) {\r\n    summaryDiv.firstElementChild.nextElementSibling.remove();\r\n  }\r\n\r\n  if (Object.values(appointment).includes(\"\")) {\r\n    const errors = document.createElement(\"P\");\r\n\r\n    errors.textContent = \"All Fields Of Information Are Required\";\r\n    errors.classList.add(\"error-date\");\r\n\r\n    summaryDiv.appendChild(errors);\r\n  } else {\r\n    //Showing Summary\r\n    const nameA = document.createElement(\"P\");\r\n    nameA.innerHTML = `<span>Name: </span> ${name}`;\r\n    const dateA = document.createElement(\"P\");\r\n    dateA.innerHTML = `<span>Date:</span> ${date}`;\r\n    const timeA = document.createElement(\"P\");\r\n    timeA.innerHTML = `<span>Time:</span> ${time}`;\r\n\r\n    //iterar sobre servicios\r\n    const serviceContent = document.createElement(\"DIV\");\r\n    serviceContent.classList.add(\"service-content\");\r\n\r\n    const headingService = document.createElement(\"H3\");\r\n    headingService.textContent = \"Services Summary\";\r\n    serviceContent.appendChild(headingService);\r\n\r\n    let total = 0;\r\n    services.forEach((service) => {\r\n      const { name, price } = service;\r\n\r\n      const serviceDiv = document.createElement(\"DIV\");\r\n      serviceDiv.classList.add(\"service-div\");\r\n\r\n      const nameService = document.createElement(\"P\");\r\n      nameService.textContent = name;\r\n\r\n      const priceService = document.createElement(\"P\");\r\n      priceService.textContent = price;\r\n      priceService.classList.add(\"price\");\r\n\r\n      const totalServices = price.split(\"$\");\r\n      total += Number(totalServices[1].trim());\r\n      \r\n\r\n      serviceDiv.appendChild(nameService);\r\n      serviceDiv.appendChild(priceService);\r\n\r\n      serviceContent.appendChild(serviceDiv);\r\n    });\r\n\r\n    summaryDiv.appendChild(nameA);\r\n    summaryDiv.appendChild(dateA);\r\n    summaryDiv.appendChild(timeA);\r\n    summaryDiv.appendChild(serviceContent);\r\n\r\n    const totalPay = document.createElement(\"P\")\r\n    totalPay.classList.add(\"totals\")\r\n    totalPay.innerHTML = `<span>Total: </span> $${total}`\r\n    summaryDiv.appendChild(totalPay)\r\n  }\r\n};\r\n\r\nconst saveName = () => {\r\n  const nameInput = document.querySelector(\"#name\");\r\n\r\n  nameInput.addEventListener(\"input\", (e) => {\r\n    const textName = e.target.value.trim();\r\n\r\n    if (textName === \"\" || textName.length < 3 || textName > 50) {\r\n      showAlert(\"Invalid Name\", \"error\");\r\n    } else {\r\n      const alert = document.querySelector(\".alert\");\r\n      if (alert) {\r\n        alert.remove();\r\n      }\r\n      appointment.name = textName;\r\n      console.log(appointment);\r\n    }\r\n  });\r\n};\r\n\r\nconst showAlert = (message, type) => {\r\n  const previousAlert = document.querySelector(\".alert\");\r\n  if (previousAlert) {\r\n    return;\r\n  }\r\n\r\n  const alert = document.createElement(\"DIV\");\r\n\r\n  alert.textContent = message;\r\n  alert.classList.add(\"alert\");\r\n\r\n  if (type === \"error\") {\r\n    alert.classList.add(\"error\");\r\n  } else if (type === \"warning\") {\r\n    alert.classList.add(\"warning\");\r\n  }\r\n\r\n  //insert to html\r\n  const form = document.querySelector(\".form\");\r\n  form.appendChild(alert);\r\n\r\n  //after 3 secons delete\r\n\r\n  setTimeout(() => {\r\n    alert.remove();\r\n  }, 5000);\r\n};\r\n\r\nconst saveDate = () => {\r\n  const dateInput = document.querySelector(\"#date\");\r\n  dateInput.addEventListener(\"input\", (e) => {\r\n    const day = new Date(e.target.value).getUTCDay();\r\n    // const today = new Date(e.target.value).getUTCDate();\r\n    // const lastday = new Date().getUTCMonth();\r\n\r\n    if ([6, 0].includes(day)) {\r\n      e.preventDefault();\r\n      dateInput.value = \"\";\r\n      showAlert(\"Sorry we work from Mondays to Fridays\", \"warning\");\r\n    } \r\n  //   else if (today <= lastday) {\r\n  //     e.preventDefault();\r\n  //     dateInput.value = \"\";\r\n  //     showAlert(\"This Day Might Be full\", \"warning\");\r\n  //  }\r\n    else {\r\n      const alert = document.querySelector(\".alert\");\r\n      if (alert) {\r\n        alert.remove();\r\n      }\r\n      appointment.date = dateInput.value;\r\n\r\n      console.log(appointment);\r\n    }\r\n\r\n    // const options = {\r\n    //   year: \"numeric\",\r\n    //   month: \"long\",\r\n    //   weekday: \"string\"\r\n    // }\r\n    // console.log(day.toLocaleDateString(\"es-ES\", options));\r\n  });\r\n};\r\n\r\nconst disableLastDays = () => {\r\n  const dateInput = document.querySelector(\"#date\");\r\n\r\n  const year = new Date().getFullYear();\r\n  const month = new Date().getMonth() + 1;\r\n  const day = new Date().getDate();\r\n\r\n  const concatDate = `${year}-${month < 10 ? `0${month}` : month}-${\r\n    day < 10 ? `0${day}` : day\r\n  }`;\r\n\r\n  dateInput.min = concatDate;\r\n};\r\n\r\nconst saveTime = () => {\r\n  const timeInput = document.querySelector(\"#time\");\r\n  timeInput.addEventListener(\"input\", (e) => {\r\n    const dateTime = e.target.value;\r\n    const time = dateTime.split(\":\");\r\n\r\n    if (time[0] < 08 || time[0] > 20) {\r\n      e.preventDefault();\r\n      timeInput.value = \"\";\r\n      showAlert(\"Sorry we work from 08:00 am to 08:00 pm\", \"warning\");\r\n    } else {\r\n      const alert = document.querySelector(\".alert\");\r\n      if (alert) {\r\n        alert.remove();\r\n      }\r\n      appointment.time = dateTime;\r\n    }\r\n    console.log(appointment);\r\n  });\r\n};\r\n"]}