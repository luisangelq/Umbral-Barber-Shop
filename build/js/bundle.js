let page=1;const appointment={name:"",date:"",time:"",services:[]};document.addEventListener("DOMContentLoaded",()=>{startApp(),showSection(),changeSection(),previousPage(),nextPage(),paginationButton(),showSummary(),saveName(),saveDate(),saveTime(),disableLastDays()});const showSection=()=>{const e=document.querySelector(".show-section");e&&e.classList.remove("show-section");document.querySelector("#step-"+page).classList.add("show-section");const t=document.querySelector(".current");t&&t.classList.remove("current");document.querySelector(`[data-step="${page}"]`).classList.add("current")},changeSection=()=>{document.querySelectorAll(".tabs button").forEach(e=>{e.addEventListener("click",e=>{e.preventDefault(),page=Number(e.target.dataset.step),showSection(),paginationButton()})})},startApp=()=>{showServices()},showServices=async()=>{try{const e=await fetch("services.json");(await e.json()).forEach(e=>{const{id:t,name:n,price:a}=e,s=document.createElement("P");s.textContent=n,s.classList.add("service-name");const o=document.createElement("P");o.textContent="$"+a,o.classList.add("service-price");const c=document.createElement("DIV");c.classList.add("service"),c.dataset.id=t,c.onclick=selectService,c.appendChild(s),c.appendChild(o),document.querySelector("#services").appendChild(c)})}catch(e){console.log(e)}},selectService=e=>{let t;if(t="P"===e.target.tagName?e.target.parentElement:e.target,t.classList.contains("selected")){t.classList.remove("selected");const e=Number(t.dataset.id);deleteService(e)}else{t.classList.add("selected");const e={id:Number(t.dataset.id),name:t.firstElementChild.textContent,price:t.firstElementChild.nextElementSibling.textContent};addService(e)}},addService=e=>{const{services:t}=appointment;appointment.services=[...t,e],console.log(appointment)},deleteService=e=>{const{services:t}=appointment;appointment.services=t.filter(t=>t.id!==e),console.log(appointment)},previousPage=()=>{document.querySelector("#previous").addEventListener("click",()=>{page--,paginationButton()})},nextPage=()=>{document.querySelector("#next").addEventListener("click",()=>{page++,paginationButton()})},paginationButton=()=>{const e=document.querySelector("#previous"),t=document.querySelector("#next");1===page?e.classList.add("hidde"):3===page?(t.classList.add("hidde"),e.classList.remove("hidde"),showSummary()):(e.classList.remove("hidde"),t.classList.remove("hidde")),showSection()},showSummary=()=>{const{name:e,date:t,time:n,services:a}=appointment,s=document.querySelector(".summary-content");for(;s.firstElementChild.nextElementSibling;)s.firstElementChild.nextElementSibling.remove();if(Object.values(appointment).includes("")){const e=document.createElement("P");e.textContent="All Fields Of Information Are Required",e.classList.add("error-date"),s.appendChild(e)}else{const o=document.createElement("P");o.innerHTML="<span>Name: </span> "+e;const c=document.createElement("P");c.innerHTML="<span>Date:</span> "+t;const r=document.createElement("P");r.innerHTML="<span>Time:</span> "+n;const i=document.createElement("DIV");i.classList.add("service-content");const d=document.createElement("H3");d.textContent="Services Summary",i.appendChild(d);let l=0;a.forEach(e=>{const{name:t,price:n}=e,a=document.createElement("DIV");a.classList.add("service-div");const s=document.createElement("P");s.textContent=t;const o=document.createElement("P");o.textContent=n,o.classList.add("price");const c=n.split("$");l+=Number(c[1].trim()),a.appendChild(s),a.appendChild(o),i.appendChild(a)}),s.appendChild(o),s.appendChild(c),s.appendChild(r),s.appendChild(i);const m=document.createElement("P");m.classList.add("totals"),m.innerHTML="<span>Total: </span> $"+l,s.appendChild(m)}},saveName=()=>{document.querySelector("#name").addEventListener("input",e=>{const t=e.target.value.trim();if(""===t||t.length<3||t>50)showAlert("Invalid Name","error");else{const e=document.querySelector(".alert");e&&e.remove(),appointment.name=t,console.log(appointment)}})},showAlert=(e,t)=>{if(document.querySelector(".alert"))return;const n=document.createElement("DIV");n.textContent=e,n.classList.add("alert"),"error"===t?n.classList.add("error"):"warning"===t&&n.classList.add("warning");document.querySelector(".form").appendChild(n),setTimeout(()=>{n.remove()},5e3)},saveDate=()=>{const e=document.querySelector("#date");e.addEventListener("input",t=>{const n=new Date(t.target.value).getUTCDay();if([6,0].includes(n))t.preventDefault(),e.value="",showAlert("Sorry we work from Mondays to Fridays","warning");else{const t=document.querySelector(".alert");t&&t.remove(),appointment.date=e.value,console.log(appointment)}})},disableLastDays=()=>{const e=document.querySelector("#date"),t=(new Date).getFullYear(),n=(new Date).getMonth()+1,a=(new Date).getDate(),s=`${t}-${n<10?"0"+n:n}-${a<10?"0"+a:a}`;e.min=s},saveTime=()=>{const e=document.querySelector("#time");e.addEventListener("input",t=>{const n=t.target.value,a=n.split(":");if(a[0]<8||a[0]>20)t.preventDefault(),e.value="",showAlert("Sorry we work from 08:00 am to 08:00 pm","warning");else{const e=document.querySelector(".alert");e&&e.remove(),appointment.time=n}console.log(appointment)})};
//# sourceMappingURL=bundle.js.map
